<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Plus Grid â€” Halo Hover</title>
<style>
  :root{
    /* Layout */
    --margin: 10px;
    --bg: #FFFFFF;

    /* Colors and sizing */
    --plus-off: #DEDEDE;   /* idle stroke */
    --plus-on:  #060723;   /* stroke on hover */
    --halo:     #7D97EB;   /* circle behind on hover */

    --stroke: 1.5px;         /* ~1.5pt */
    --cell: 30px;
    --gap: 18px;
    --arm: 4px;            /* half-length of + arms */
    --halo-r: 12px;         /* circle radius in SVG units */
  }

  html, body { margin:0; height:100%; overflow:hidden; background:var(--bg); }

  .wrap{
    position:fixed; inset:var(--margin);
    display:grid; place-content:center; box-sizing:border-box;
  }

  .grid{
    display:grid;
    grid-template-columns:repeat(var(--cols,1), var(--cell));
    grid-auto-rows:var(--cell);
    gap:var(--gap);
    /* width/height set in JS for perfect centering */
  }

  .dot{ width:var(--cell); height:var(--cell); display:grid; place-items:center; user-select:none; }

  svg{ width:var(--cell); height:var(--cell); overflow:visible; }

  /* Plus lines */
  .plus line{
    stroke:var(--plus-off);
    stroke-width:var(--stroke);
    stroke-linecap:round;
    opacity:.95;
    transition:stroke .15s linear, opacity .2s ease;
  }

  /* Hover circle (halo) is hidden by default */
  .halo{
    fill:var(--halo);
    opacity:0;
    transform:scale(.85);
    transform-origin:center;
    transition:opacity .22s ease, transform .22s ease;
  }

  /* Activate on proximity or actual hover */
  .dot:hover .plus line,
  .dot._active .plus line{ stroke:var(--plus-on); opacity:1; }

  .dot:hover .halo,
  .dot._active .halo{ opacity:1; transform:scale(1); }

  @media (max-width:700px){
    :root{ --cell:14px; --gap:18px; --arm:3.5px; --halo-r:7px; }
  }

  @supports (height:100dvh){ .wrap{ height:calc(100dvh - 2 * var(--margin)); } }
</style>
</head>
<body>
  <div class="wrap" id="wrap">
    <div class="grid" id="grid" aria-hidden="true"></div>
  </div>

<script>
  const css  = getComputedStyle(document.documentElement);
  const wrap = document.getElementById('wrap');
  const grid = document.getElementById('grid');
  const num  = v => parseFloat(v);

  function readVars(){
    return {
      cell: num(css.getPropertyValue('--cell')),
      gap:  num(css.getPropertyValue('--gap')),
      arm:  num(css.getPropertyValue('--arm')),
      haloR:num(css.getPropertyValue('--halo-r'))
    };
  }

  function fitGrid(){
    const {cell, gap} = readVars();
    const W = wrap.clientWidth, H = wrap.clientHeight;
    const cols = Math.max(1, Math.floor((W + gap)/(cell + gap)));
    const rows = Math.max(1, Math.floor((H + gap)/(cell + gap)));
    grid.style.setProperty('--cols', cols);
    grid.style.width  = (cols * cell + (cols - 1) * gap) + 'px';
    grid.style.height = (rows * cell + (rows - 1) * gap) + 'px';
    return {cols, rows};
  }

  function makePlus(arm, haloR){
    const NS = 'http://www.w3.org/2000/svg';
    const s = document.createElementNS(NS,'svg');
    s.setAttribute('viewBox','-12 -12 24 24');

    // Halo circle behind the plus
    const c = document.createElementNS(NS,'circle');
    c.setAttribute('class','halo');
    c.setAttribute('cx','0'); c.setAttribute('cy','0'); c.setAttribute('r', haloR);

    // Plus
    const g = document.createElementNS(NS,'g'); g.setAttribute('class','plus');
    const h = document.createElementNS(NS,'line'); h.setAttribute('x1',-arm); h.setAttribute('y1',0);  h.setAttribute('x2',arm); h.setAttribute('y2',0);
    const v = document.createElementNS(NS,'line'); v.setAttribute('x1',0);    v.setAttribute('y1',-arm); v.setAttribute('x2',0);   v.setAttribute('y2',arm);

    g.appendChild(h); g.appendChild(v);
    s.appendChild(c); s.appendChild(g);
    return s;
  }

  let cache={cols:0, rows:0};
  function build(){
    const {cols, rows} = fitGrid();
    if(cols===cache.cols && rows===cache.rows) return;
    cache={cols, rows};

    const {arm, haloR} = readVars();
    const frag=document.createDocumentFragment();
    for(let i=0;i<cols*rows;i++){
      const cell=document.createElement('div');
      cell.className='dot';
      cell.appendChild(makePlus(arm, haloR));
      frag.appendChild(cell);
    }
    grid.replaceChildren(frag);
  }

  // Proximity activation
  const R = 44;
  function proximity(){
    grid.addEventListener('mousemove',(e)=>{
      const rect = grid.getBoundingClientRect();
      const x = e.clientX - rect.left, y = e.clientY - rect.top;
      for (const cell of grid.children){
        const r = cell.getBoundingClientRect();
        const cx = r.left - rect.left + r.width/2;
        const cy = r.top  - rect.top  + r.height/2;
        cell.classList.toggle('_active', Math.hypot(cx-x, cy-y) < R);
      }
    });
    grid.addEventListener('mouseleave',()=>{ for(const cell of grid.children) cell.classList.remove('_active'); });
  }

  const ro=new ResizeObserver(()=>build());
  ro.observe(wrap);
  addEventListener('load',()=>requestAnimationFrame(build));
  addEventListener('resize',build);
  proximity();
</script>
</body>
</html>



